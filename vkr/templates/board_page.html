{% extends 'base.html' %}

{% block styles %}
    <link rel="stylesheet" href="/static/css/boards.css">
    <link rel="stylesheet" href="/static/css/board_info.css">
{% endblock %}

{% block title %} –î–æ—Å–∫–∞: {{ board.name }} {% endblock %}

{% block body %} 
    <div class="board-info">
        <div class="board-main-info">
            <div class="board-name-div">
                <div style="display: block;">
                    <h1 style="margin-bottom: 10px;">{{ board.name }}</h1>
                </div>
                <div>
                    <ul>
                        <li>üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: {{ teacher.name }}</li>
                        <li>‚úâÔ∏è –î–ª—è —Å–≤—è–∑–∏: {{ teacher.email }}</li>
                    </ul>
                </div>
            </div>
            <div  id="members-div" class="members">
                <div class="content">
                    <ul>
                        {% for i in students %}
                            {% if i.id != current_user.id %}
                            <li>
                                <div class="color-circle" style="background-color: {{ i.color if i.color else '#ffffff' }};" title="–¶–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"></div>
                                {{ i.name }}
                            </li>
                            {% endif %}
                        {% endfor %}
                        {% if current_user.role == 'student' %}
                            <li id="current_user_li">
                                <div class="color-circle-container">
                                    <input type="color" id="color-picker" style="display: none;" value="{{ current_user_color if current_user_color else '#ffffff' }}">
                                    <div class="current-user-color-circle" data-user-id="{{ current_user.id }}" style=" background-color: {{ current_user_color if current_user_color else '#ffffff' }};"></div>
                                </div>
                                {{ current_user.name }} (–í—ã)
                            </li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </div>

        <div class="trash-zone">
            <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å—é–¥–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è</p>
        </div>
        
    </div>
    
           
    
    
    
    
    <div class="columns-container">
        

            {% for column in columns %}
            <div class="column" data-column-id="{{ column.id }}">

                <div class="column-info">
                    <p>{{ column.name }}</p>
                </div>
                <div class="blocks-container">
                        {% for block in column.blocks %}
                        <div class="block" data-block-id="{{ block.id }}" style="border-bottom: 1rem solid {{ block.color }};">
                            {{ block.text }}
                            {% if current_user.role == 'student' and block.color == none %}
                                <div class="take-task" title="–í–∑—è—Ç—å –∑–∞–¥–∞—á—É —Å–µ–±–µ"></div>
                            {% endif %}
                        </div>
                        {% endfor %}
                </div>
                <div class="column-tools">
                    <form class="add-block-form">
                        <textarea type="text" class="new-block-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –±–ª–æ–∫–∞" style="display: none;"></textarea>
                        <div style="display: flex; flex-direction: row;">
                            <button class="add-block-btn" type="submit">–î–æ–±–∞–≤–∏—Ç—å —è—á–µ–π–∫—É</button>
                            <button class="go-back" type="button" style="display: none;">
                                <img src="{{ url_for('static', filename='img/back.png') }}" alt="–ù–∞–∑–∞–¥">
                            </button>
                        </div>
                    </form>
                </div>
            </div>
           
            {% endfor %}
            
            <form class="add-column-form">
                <input style="display: none;"  type="text" id="new-column-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏">
                <div style="display: flex; flex-direction: row; gap: 2px;">
                    <button type="submit" id="add-column-btn">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É</button>
                    <button class="go-back-column" type="button" style="display: none;">
                        <img src="{{ url_for('static', filename='img/back.png') }}" alt="–ù–∞–∑–∞–¥">
                    </button>
                </div>
            </form>
        
    </div>
    

   
{% endblock %}

{% block js %}
<script type="text/javascript">
    const boardId =  "{{ board.id|tojson|safe }}";
</script>

<script src="{{ url_for('static', filename='js/board.js') }}"></script>
<script src="{{ url_for('static', filename='js/drag.js') }}"></script>
<script src="{{ url_for('static', filename='js/color-pick.js') }}"></script>
<script src="{{ url_for('static', filename='js/take-task.js') }}"></script>
<!-- <script src="{{ url_for('static', filename='js/drag_test.js')}}"></script> -->

{% endblock %}